<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard ðŸš€</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg,#00c6ff,#0072ff); color:#fff; display:flex; justify-content:center; align-items:center; height:100vh; }
    h1 { font-size:2.5rem; animation: fadeIn 2s ease forwards; }
    @keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
  </style>
</head>
<body>
  <h1>âœ¨ Welcome to your Dashboard ðŸŽ‰</h1>
</body>
    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopRite - Books Reign Hub Online Shopping</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* Header & Navigation */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo h2 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .search-bar {
            display: flex;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 0.5rem;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .search-bar:focus-within {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-bar input {
            border: none;
            background: transparent;
            padding: 0.5rem 1rem;
            outline: none;
            width: 300px;
            font-size: 0.9rem;
        }

        .search-bar button {
            background: #667eea;
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-bar button:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: #667eea;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: #667eea;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-icons {
            display: flex;
            gap: 1rem;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #333;
            cursor: pointer;
            position: relative;
            padding: 0.5rem;
            transition: all 0.3s ease;
        }

        .icon-btn:hover {
            color: #667eea;
            transform: translateY(-2px);
        }

        .badge {
            position: absolute;
            top: 0;
            right: 0;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Hero Section */
        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8rem 2rem 4rem;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .hero-content {
            flex: 1;
            max-width: 500px;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #333, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from {
                text-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
            }
            to {
                text-shadow: 0 0 30px rgba(102, 126, 234, 0.8), 0 0 40px rgba(102, 126, 234, 0.6);
            }
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 2rem;
        }

        .cta-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .hero-image {
            flex: 1;
            position: relative;
            height: 400px;
        }

        .floating-card {
            position: absolute;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            animation: float 3s ease-in-out infinite;
        }

        .floating-card i {
            color: #667eea;
            font-size: 1.2rem;
        }

        #card1 {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        #card2 {
            top: 50%;
            right: 20%;
            animation-delay: 1s;
        }

        #card3 {
            bottom: 20%;
            left: 30%;
            animation-delay: 2s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Sections */
        section {
            padding: 4rem 2rem;
            background: white;
            margin: 2rem auto;
            border-radius: 20px;
            max-width: 1400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #333, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Categories */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .category-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem 1rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .category-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .category-card i {
            font-size: 2rem;
        }

        /* Products */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .filter-buttons {
            display: flex;
            gap: 1rem;
        }

        .filter-btn {
            padding: 0.5rem 1.5rem;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #667eea;
        }

        .product-info h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .product-original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
            margin-left: 0.5rem;
        }

        .product-rating {
            color: #ffc107;
            margin-bottom: 1rem;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .add-to-cart {
            background: #667eea;
            color: white;
        }

        .add-to-cart:hover {
            background: #5a6fd8;
            transform: scale(1.05);
        }

        .wishlist-btn {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e9ecef;
        }

        .wishlist-btn:hover {
            background: #ff4757;
            color: white;
            border-color: #ff4757;
        }

        .sale-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ff4757;
            color: white;
            padding: 0.3rem 0.7rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Deals Section */
        .deals-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .deal-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .deal-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .deal-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .deal-card p {
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .deal-timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: 600;
            margin-bottom: 1rem;
            display: inline-block;
        }

        .deal-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ff4757;
            color: white;
            padding: 0.3rem 0.7rem;
            border-radius: 15px;
            font-weight: 600;
        }

        .deal-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .deal-btn:hover {
            background: #f8f9fa;
            transform: scale(1.05);
        }

        /* Sidebars */
        .sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1001;
            display: flex;
            flex-direction: column;
        }

        .sidebar.active {
            right: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #e9ecef;
        }

        .sidebar-header h3 {
            margin: 0;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .close-btn:hover {
            color: #333;
        }

        .sidebar-content {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid #e9ecef;
        }

        .cart-total {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        /* User Menu */
        .user-menu {
            position: absolute;
            top: 100%;
            right: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            display: none;
            z-index: 1002;
        }

        .user-menu.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-menu-item {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .user-menu-item:hover {
            background: #f8f9fa;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1003;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal .close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal h2 {
            margin-bottom: 1.5rem;
            text-align: center;
            color: #333;
        }

        .modal input {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .modal input:focus {
            outline: none;
            border-color: #667eea;
        }

        .modal button {
            width: 100%;
            padding: 1rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal button:hover {
            background: #5a6fd8;
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 3rem 2rem 1rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3,
        .footer-section h4 {
            margin-bottom: 1rem;
        }

        .footer-section a {
            display: block;
            color: #bdc3c7;
            text-decoration: none;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-section input {
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border: none;
            border-radius: 5px;
        }

        .footer-section button {
            width: 100%;
            padding: 0.8rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .footer-section button:hover {
            background: #5a6fd8;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
        }

        /* Loading Animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
           
            .search-bar input {
                width: 200px;
            }
           
            .nav-links {
                gap: 1rem;
            }
           
            .hero {
                flex-direction: column;
                text-align: center;
                padding: 6rem 1rem 2rem;
            }
           
            .hero-title {
                font-size: 2.5rem;
            }
           
            .section-header {
                flex-direction: column;
                text-align: center;
            }
           
            .sidebar {
                width: 100%;
                right: -100%;
            }
           
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
           
            .categories-grid {
                grid-template-columns: 1fr;
            }
           
            .deals-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header & Navigation -->
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <div class="logo">
                    <h2>ðŸ›’ Books Reign Hub_ShopRite</h2>
                </div>
               
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search products...">
                    <button onclick="searchProducts()"><i class="fas fa-search"></i></button>
                </div>
               
                <div class="nav-links">
                    <a href="#home" class="nav-link">Home</a>
                    <a href="#products" class="nav-link">Products</a>
                    <a href="#deals" class="nav-link">Deals</a>
                    <a href="#categories" class="nav-link">Categories</a>
                </div>
               
                <div class="nav-icons">
                    <button class="icon-btn" onclick="toggleWishlist()">
                        <i class="fas fa-heart"></i>
                        <span class="badge" id="wishlistCount">0</span>
                    </button>
                    <button class="icon-btn" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="badge" id="cartCount">0</span>
                    </button>
                    <button class="icon-btn" onclick="toggleUserMenu()">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="hero-title" id="animatedTitle">Discover Amazing Deals</h1>
            <p class="hero-subtitle">Get the best products at unbeatable prices</p>
            <button class="cta-button" onclick="scrollToProducts()">Shop Now <i class="fas fa-arrow-right"></i></button>
        </div>
        <div class="hero-image">
            <div class="floating-card" id="card1">
                <i class="fas fa-shipping-fast"></i>
                <span>Free Shipping</span>
            </div>
            <div class="floating-card" id="card2">
                <i class="fas fa-shield-alt"></i>
                <span>Secure Payment</span>
            </div>
            <div class="floating-card" id="card3">
                <i class="fas fa-undo"></i>
                <span>Easy Returns</span>
            </div>
        </div>
         </section>

    <!-- Categories Section -->
    <section id="categories" class="categories">
        <h2 class="section-title">Shop by Category</h2>
        <div class="categories-grid">
            <div class="category-card" onclick="filterCategory('electricals')">
                <i class="fas fa-laptop"></i>
                <span>Electricals</span>
            </div>
            </div>
            <div class="category-card" onclick="filterCategory('fashion')">
                <i class="fas fa-tshirt"></i>
                <span>Fashion</span>
            </div>
            <div class="category-card" onclick="filterCategory('home')">
                <i class="fas fa-home"></i>
                <span>Home & Garden</span>
            </div>
            <div class="category-card" onclick="filterCategory('sports')">
                <i class="fas fa-basketball-ball"></i>
                <span>Sports</span>
            </div>
            <div class="category-card" onclick="filterCategory('beauty')">
                <i class="fas fa-spa"></i>
                <span>Beauty</span>
            </div>
            <div class="category-card" onclick="filterCategory('toys')">
                <i class="fas fa-gamepad"></i>
                <span>Toys & Games</span>
            </div>
        </div>
    </section>
    <!-- Featured Products -->
    <section id="products" class="products">
        <div class="section-header">
            <h2 class="section-title">Featured Products</h2>
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterProducts('all')">All</button>
                <button class="filter-btn" onclick="filterProducts('featured')">Featured</button>
                <button class="filter-btn" onclick="filterProducts('sale')">On Sale</button>
            </div>
        </div>
       
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here by JavaScript -->
        </div>
    </section>

    <!-- Special Deals -->
    <section id="deals" class="deals">
        <h2 class="section-title">Hot Deals ðŸ”¥</h2>
        <div class="deals-container">
            <div class="deal-card">
                <div class="deal-timer" id="dealTimer1">
                    <span>02:15:30</span>
                </div>
                <h3>Flash Sale</h3>
                <p>Up to 70% OFF</p>
                <button class="deal-btn" onclick="viewDeal('flash')">Shop Now</button>
            </div>
            <div class="deal-card">
                <div class="deal-badge">BOGO</div>
                <h3>Buy 1 Get 1</h3>
                <p>Selected Items</p>
                <button class="deal-btn" onclick="viewDeal('bogo')">Shop Now</button>
            </div>
            <div class="deal-card">
                <div class="deal-badge">FREE</div>
                <h3>Free Shipping</h3>
                <p>On orders over GHC50</p>
                <button class="deal-btn" onclick="viewDeal('shipping')">Shop Now</button>
            </div>
        </div>
    </section>

    <!-- Shopping Cart Sidebar -->
    <div id="cartSidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>Your Cart</h3>
            <button class="close-btn" onclick="toggleCart()">&times;</button>
        </div>
        <div class="sidebar-content" id="cartContent">
            <!-- Cart items will be loaded here -->
        </div>
        <div class="sidebar-footer">
            <div class="cart-total">
                <strong>Total: GHC<span id="cartTotal">0.00</span></strong>
            </div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div id="wishlistSidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>Your Wishlist</h3>
            <button class="close-btn" onclick="toggleWishlist()">&times;</button>
        </div>
        <div class="sidebar-content" id="wishlistContent">
            <!-- Wishlist items will be loaded here -->
        </div>
    </div>

    <!-- User Menu -->
    <div id="userMenu" class="user-menu">
        <div class="user-menu-item" onclick="showLogin()">
            <i class="fas fa-sign-in-alt"></i>
            <span>Login</span>
        </div>
        <div class="user-menu-item" onclick="showRegister()">
            <i class="fas fa-user-plus"></i>
            <span>Register</span>
        </div>
        <div class="user-menu-item" onclick="showOrders()">
            <i class="fas fa-box"></i>
            <span>Orders</span>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Login to ShopRite</h2>
            <form id="loginForm">
                <input type="email" placeholder="Email" required>
                <input type="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>ShopRite</h3>
                <p>Your trusted online shopping destination with the best prices and quality products.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="#home">Home</a>
                <a href="#products">Products</a>
                <a href="#deals">Deals</a>
                <a href="#categories">Categories</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="#">Contact Us</a>
                <a href="#">Shipping Info</a>
                <a href="#">Returns</a>
                <a href="#">FAQ</a>
            </div>
            <div class="footer-section">
                <h4>Newsletter</h4>
                <input type="email" placeholder="Enter your email">
                <button>Subscribe</button>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 ShopRite. All rights reserved.</p>
        </div>
    </footer>

    <!-- Loading Animation -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
    </div>

    <script>
        // ShopRite E-commerce JavaScript
        class ShopRite {
            constructor() {
                this.products = [];
                this.cart = JSON.parse(localStorage.getItem('cart')) || [];
                this.wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                this.currentFilter = 'all';
                this.currentCategory = 'all';
               
                this.init();
            }

            async init() {
                await this.loadProducts();
                this.setupEventListeners();
                this.updateCartCount();
                this.updateWishlistCount();
                this.startDealTimer();
                this.setupAnimations();
            }

            async loadProducts() {
                try {
                    // Use default products
                    this.products = this.getDefaultProducts();
                } catch (error) {
                    console.log('Using default products');
                    this.products = this.getDefaultProducts();
                }
               
                this.displayProducts(this.products);
            }

            getDefaultProducts() {
                return [
                    {
                        id: 1,
                        name: "Wireless Bluetooth Headphones",
                        price: 79.99,
                        originalPrice: 99.99,
                        category: "electronics",
                        image: "ðŸŽ§",
                        rating: 4.5,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 2,
                        name: "Smart Fitness Watch",
                        price: 199.99,
                        originalPrice: 249.99,
                        category: "electronics",
                        image: "âŒš",
                        rating: 4.8,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 3,
                        name: "Organic Cotton T-Shirt",
                        price: 24.99,
                        category: "fashion",
                        image: "ðŸ‘•",
                        rating: 4.3,
                        featured: false,
                        sale: false
                    },
                    {
                        id: 4,
                        name: "Professional Camera",
                        price: 899.99,
                        originalPrice: 1099.99,
                        category: "electronics",
                        image: "ðŸ“·",
                        rating: 4.9,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 5,
                        name: "Yoga Mat Premium",
                        price: 39.99,
                        category: "sports",
                        image: "ðŸ§˜",
                        rating: 4.6,
                        featured: false,
                        sale: false
                    },
                    {
                        id: 6,
                        name: "Designer Handbag",
                        price: 129.99,
                        originalPrice: 199.99,
                        category: "fashion",
                        image: "ðŸ‘œ",
                        rating: 4.4,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 7,
                        name: "Gaming Keyboard",
                        price: 89.99,
                        category: "electronics",
                        image: "âŒ¨ï¸",
                        rating: 4.7,
                        featured: false,
                        sale: false
                    },
                    {
                        id: 8,
                        name: "Skincare Set",
                        price: 49.99,
                        originalPrice: 69.99,
                        category: "beauty",
                        image: "ðŸ’„",
                        rating: 4.5,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 9,
                        name: "Wireless Earbuds",
                        price: 59.99,
                        originalPrice: 79.99,
                        category: "electronics",
                        image: "ðŸŽµ",
                        rating: 4.2,
                        featured: false,
                        sale: true
                    },
                    {
                        id: 10,
                        name: "Running Shoes",
                        price: 89.99,
                        category: "sports",
                        image: "ðŸ‘Ÿ",
                        rating: 4.6,
                        featured: true,
                        sale: false
                    },
                    {
                        id: 11,
                        name: "Smartphone Pro",
                        price: 699.99,
                        originalPrice: 899.99,
                        category: "electronics",
                        image: "ðŸ“±",
                        rating: 4.8,
                        featured: true,
                        sale: true
                    },
                    {
                        id: 12,
                        name: "Home Blender",
                        price: 49.99,
                        category: "home",
                        image: "ðŸ¥¤",
                        rating: 4.3,
                        featured: false,
                        sale: false
                    }
                ];
            }

            setupEventListeners() {
                // Search functionality
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.searchProducts(e.target.value);
                });

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.filterProducts(e.target.textContent.toLowerCase());
                    });
                });

                // Modal handling
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            this.closeModal(modal.id);
                        }
                    });
                });

                // Login form
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleLogin();
                });
            }

            setupAnimations() {
                // Title animation
                const title = document.getElementById('animatedTitle');
                if (title) {
                    setInterval(() => {
                        title.style.animation = 'none';
                        setTimeout(() => {
                            title.style.animation = 'titleGlow 2s ease-in-out infinite alternate';
                        }, 10);
                    }, 5000);
                }

                // Scroll animations
                this.setupScrollAnimations();
            }

            setupScrollAnimations() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.product-card, .category-card, .deal-card').forEach(el => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(30px)';
                    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                    observer.observe(el);
                });
            }

            displayProducts(products) {
                const grid = document.getElementById('productsGrid');
                grid.innerHTML = '';

                products.forEach(product => {
                    const productCard = this.createProductCard(product);
                    grid.appendChild(productCard);
                });
            }

            createProductCard(product) {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    ${product.sale ? '<div class="sale-badge">SALE</div>' : ''}
                    <div class="product-image">
                        ${product.image}
                    </div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <div class="product-rating">
                            ${this.generateStars(product.rating)}
                        </div>
                        <div class="product-price">
                            $${product.price}
                            ${product.originalPrice ?
                                `<span class="product-original-price">$${product.originalPrice}</span>` :
                                ''
                            }
                        </div>
                        <div class="product-actions">
                            <button class="action-btn add-to-cart" onclick="shoprite.addToCart(${product.id})">
                                Add to Cart
                            </button>
                            <button class="action-btn wishlist-btn" onclick="shoprite.toggleWishlistItem(${product.id})">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                `;
                return card;
            }

            generateStars(rating) {
                const stars = [];
                const fullStars = Math.floor(rating);
                const hasHalfStar = rating % 1 !== 0;

                for (let i = 0; i < fullStars; i++) {
                    stars.push('<i class="fas fa-star"></i>');
                }
               
                if (hasHalfStar) {
                    stars.push('<i class="fas fa-star-half-alt"></i>');
                }
               
                const emptyStars = 5 - stars.length;
                for (let i = 0; i < emptyStars; i++) {
                    stars.push('<i class="far fa-star"></i>');
                }

                return stars.join('');
            }

            searchProducts(query) {
                const filtered = this.products.filter(product =>
                    product.name.toLowerCase().includes(query.toLowerCase())
                );
                this.displayProducts(filtered);
            }

            filterProducts(filter) {
                this.currentFilter = filter;
                this.applyFilters();
            }

            filterCategory(category) {
                this.currentCategory = category;
                this.applyFilters();
            }

            applyFilters() {
                let filtered = [...this.products];

                if (this.currentCategory !== 'all') {
                    filtered = filtered.filter(product => product.category === this.currentCategory);
                }

                if (this.currentFilter === 'featured') {
                    filtered = filtered.filter(product => product.featured);
                } else if (this.currentFilter === 'sale') {
                    filtered = filtered.filter(product => product.sale);
                }

                this.displayProducts(filtered);
            }

            addToCart(productId) {
                const product = this.products.find(p => p.id === productId);
                const existingItem = this.cart.find(item => item.id === productId);

                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.cart.push({
                        ...product,
                        quantity: 1
                    });
                }

                this.saveCart();
                this.updateCartCount();
                this.showNotification(`${product.name} added to cart!`);
            }

            removeFromCart(productId) {
                this.cart = this.cart.filter(item => item.id !== productId);
                this.saveCart();
                this.updateCartCount();
                this.updateCartDisplay();
            }

            updateCartQuantity(productId, change) {
                const item = this.cart.find(item => item.id === productId);
                if (item) {
                    item.quantity += change;
                    if (item.quantity <= 0) {
                        this.removeFromCart(productId);
                    } else {
                        this.saveCart();
                        this.updateCartDisplay();
                    }
                }
            }

            saveCart() {
                localStorage.setItem('cart', JSON.stringify(this.cart));
            }

            updateCartCount() {
                const count = this.cart.reduce((total, item) => total + item.quantity, 0);
                document.getElementById('cartCount').textContent = count;
            }

            updateWishlistCount() {
                document.getElementById('wishlistCount').textContent = this.wishlist.length;
            }

            toggleWishlistItem(productId) {
                const index = this.wishlist.indexOf(productId);
               
                if (index > -1) {
                    this.wishlist.splice(index, 1);
                    this.showNotification('Removed from wishlist');
                } else {
                    this.wishlist.push(productId);
                    this.showNotification('Added to wishlist!');
                }

                localStorage.setItem('wishlist', JSON.stringify(this.wishlist));
                this.updateWishlistCount();
            }

            toggleCart() {
                const sidebar = document.getElementById('cartSidebar');
                sidebar.classList.toggle('active');
                this.updateCartDisplay();
            }

            toggleWishlist() {
                const sidebar = document.getElementById('wishlistSidebar');
                sidebar.classList.toggle('active');
                this.updateWishlistDisplay();
            }

            toggleUserMenu() {
                const menu = document.getElementById('userMenu');
                menu.classList.toggle('active');
            }

            updateCartDisplay() {
                const content = document.getElementById('cartContent');
                content.innerHTML = '';

                if (this.cart.length === 0) {
                    content.innerHTML = '<p style="text-align: center; color: #666;">Your cart is empty</p>';
                    document.getElementById('cartTotal').textContent = '0.00';
                    return;
                }

                let total = 0;

                this.cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e9ecef;">
                            <div style="font-size: 2rem;">${item.image}</div>
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 0.5rem 0;">GHC{item.name}</h4>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <button onclick="shoprite.updateCartQuantity(GHC{item.id}, -1)" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 5px; width: 30px; height: 30px; cursor: pointer;">-</button>
                                    <span>${item.quantity}</span>
                                    <button onclick="shoprite.updateCartQuantity(GHC{item.id}, 1)" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 5px; width: 30px; height: 30px; cursor: pointer;">+</button>
                                    <span style="font-weight: bold; margin-left: auto;">$${itemTotal.toFixed(2)}</span>
                                </div>
                            </div>
                            <button onclick="shoprite.removeFromCart(${item.id})" style="background: none; border: none; color: #ff4757; cursor: pointer; font-size: 1.2rem;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    content.appendChild(cartItem);
                });

                document.getElementById('cartTotal').textContent = total.toFixed(2);
            }

            updateWishlistDisplay() {
                const content = document.getElementById('wishlistContent');
                content.innerHTML = '';

                if (this.wishlist.length === 0) {
                    content.innerHTML = '<p style="text-align: center; color: #666;">Your wishlist is empty</p>';
                    return;
                }

                this.wishlist.forEach(productId => {
                    const product = this.products.find(p => p.id === productId);
                    if (product) {
                        const wishlistItem = document.createElement('div');
                        wishlistItem.className = 'wishlist-item';
                        wishlistItem.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e9ecef;">
                                <div style="font-size: 2rem;">${product.image}</div>
                                <div style="flex: 1;">
                                    <h4 style="margin: 0 0 0.5rem 0;">${product.name}</h4>
                                    <div style="color: #667eea; font-weight: bold;">$${product.price}</div>
                                </div>
                                <button onclick="shoprite.addToCart(${product.id})" style="background: #667eea; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">
                                    Add to Cart
                                </button>
                            </div>
                        `;
                        content.appendChild(wishlistItem);
                    }
                });
            }

            checkout() {
                if (this.cart.length === 0) {
                    this.showNotification('Your cart is empty!');
                    return;
                }

                this.showLoading(true);
               
                // Simulate checkout process
                setTimeout(() => {
                    this.showLoading(false);
                    this.showNotification('Order placed successfully!');
                    this.cart = [];
                    this.saveCart();
                    this.updateCartCount();
                    this.updateCartDisplay();
                    this.toggleCart();
                }, 2000);
            }

            showLogin() {
                this.closeAllModals();
                document.getElementById('loginModal').classList.add('active');
                this.toggleUserMenu();
            }

            showRegister() {
                // Similar to showLogin but for registration
                this.showNotification('Registration feature coming soon!');
                this.toggleUserMenu();
            }

            showOrders() {
                this.showNotification('Order history feature coming soon!');
                this.toggleUserMenu();
            }

            closeModal(modalId) {
                document.getElementById(modalId).classList.remove('active');
            }

            closeAllModals() {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.classList.remove('active');
                });
            }

            handleLogin() {
                this.showLoading(true);
               
                setTimeout(() => {
                    this.showLoading(false);
                    this.closeModal('loginModal');
                    this.showNotification('Login successful!');
                }, 1500);
            }

            showLoading(show) {
                const loading = document.getElementById('loading');
                if (show) {
                    loading.classList.add('active');
                } else {
                    loading.classList.remove('active');
                }
            }

            showNotification(message) {
                // Create notification element
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: #667eea;
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    z-index: 10000;
                    transform: translateX(400px);
                    transition: transform 0.3s ease;
                `;
                notification.textContent = message;

                document.body.appendChild(notification);

                // Animate in
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);

                // Remove after 3 seconds
                setTimeout(() => {
                    notification.style.transform = 'translateX(400px)';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }

            startDealTimer() {
                const timerElement = document.getElementById('dealTimer1');
                if (!timerElement) return;

                let time = 2 * 60 * 60 + 15 * 60 + 30; // 2 hours, 15 minutes, 30 seconds

                const updateTimer = () => {
                    const hours = Math.floor(time / 3600);
                    const minutes = Math.floor((time % 3600) / 60);
                    const seconds = time % 60;

                    timerElement.innerHTML = `
                        <span>${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}</span>
                    `;

                    if (time > 0) {
                        time--;
                    } else {
                        time = 24 * 60 * 60; // Reset to 24 hours
                    }
                };

                updateTimer();
                setInterval(updateTimer, 1000);
            }

            scrollToProducts() {
                document.getElementById('products').scrollIntoView({
                    behavior: 'smooth'
                });
            }

            viewDeal(dealType) {
                this.showNotification(`Exploring ${dealType} deals!`);
                // In a real app, this would filter products by deal type
            }
        }

        // Global functions for HTML onclick attributes
        function toggleCart() {
            shoprite.toggleCart();
        }

        function toggleWishlist() {
            shoprite.toggleWishlist();
        }

        function toggleUserMenu() {
            shoprite.toggleUserMenu();
        }

        function filterProducts(filter) {
            shoprite.filterProducts(filter);
        }

        function filterCategory(category) {
            shoprite.filterCategory(category);
        }

        function searchProducts() {
            const query = document.getElementById('searchInput').value;
            shoprite.searchProducts(query);
        }

        function scrollToProducts() {
            shoprite.scrollToProducts();
        }

        function viewDeal(dealType) {
            shoprite.viewDeal(dealType);
        }

        function showLogin() {
            shoprite.showLogin();
        }

        function showRegister() {
            shoprite.showRegister();
        }

        function showOrders() {
            shoprite.showOrders();
        }

        function closeModal(modalId) {
            shoprite.closeModal(modalId);
        }

        // Initialize the application
        const shoprite = new ShopRite();

        // Close modals and menus when clicking outside
        document.addEventListener('click', (e) => {
            const userMenu = document.getElementById('userMenu');
            if (userMenu && !e.target.closest('.icon-btn') && !e.target.closest('#userMenu')) {
                userMenu.classList.remove('active');
            }
        });

        // Add some sample products to localStorage if not exists
        if (!localStorage.getItem('productsLoaded')) {
            setTimeout(() => {
                localStorage.setItem('productsLoaded', 'true');
            }, 1000);
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghana Stock Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #4a6491;
            --success: #00a86b;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #f5f7fa;
            --dark: #2c3e50;
            --ghana-gold: #FFD700;
            --ghana-red: #CE1126;
            --ghana-green: #006B3F;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--ghana-green), var(--ghana-red));
            color: white;
            padding: 25px 0;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            position: relative;
            border: 3px solid var(--ghana-gold);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--ghana-gold);
        }

        .logo h1 {
            font-size: 2.2rem;
            font-weight: 600;
        }

        .security-panel {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .lock-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .lock-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .stats {
            display: flex;
            gap: 30px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid var(--ghana-gold);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            gap: 20px;
        }

        .search-box {
            flex: 1;
            max-width: 400px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        .filter-controls {
            display: flex;
            gap: 15px;
        }

        .filter-controls select, .filter-controls button {
            padding: 12px 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .filter-controls button {
            background: var(--ghana-green);
            color: white;
            border: none;
            transition: background 0.3s;
        }

        .filter-controls button:hover {
            background: var(--ghana-red);
        }

        .combo-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            border-left: 5px solid var(--ghana-green);
        }

        .combo-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
        }

        .combo-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .combo-controls select, .combo-controls input {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .combo-controls button {
            padding: 10px 20px;
            background: var(--info);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .combo-controls button:hover {
            background: #2980b9;
        }

        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            margin-bottom: 30px;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
        }

        .table-title {
            padding: 15px 20px;
            background: var(--ghana-green);
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .table-actions button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .save-btn {
            background: var(--success);
            color: white;
        }

        .save-btn:hover {
            background: #008f5c;
        }

        .clear-btn {
            background: var(--warning);
            color: white;
        }

        .clear-btn:hover {
            background: #e67e22;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--ghana-green);
            color: white;
        }

        th {
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 1rem;
        }

        tbody tr {
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }

        tbody tr:hover {
            background: #f9fafc;
        }

        td {
            padding: 16px 15px;
        }

        .category {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .category.electronics {
            background: #e1f0ff;
            color: #0066cc;
        }

        .category.clothing {
            background: #ffe6e6;
            color: #cc0000;
        }

        .category.food {
            background: #e6ffe6;
            color: #008000;
        }

        .category.home {
            background: #fff0e6;
            color: #cc6600;
        }

        input[type="number"], input[type="text"] {
            width: 90px;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.95rem;
        }

        .profit-margin {
            font-weight: 600;
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        .actions button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .edit-btn {
            background: #e1f0ff;
            color: #0066cc;
        }

        .edit-btn:hover {
            background: #cce5ff;
        }

        .delete-btn {
            background: #ffe6e6;
            color: #cc0000;
        }

        .delete-btn:hover {
            background: #ffcccc;
        }

        .add-item-form {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
        }

        .form-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        .form-group input, .form-group select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .submit-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #008f5c;
        }

        .locked {
            opacity: 0.6;
            pointer-events: none;
        }

        .security-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .security-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 400px;
            max-width: 90%;
        }

        .security-form h2 {
            margin-bottom: 20px;
            color: var(--primary);
            text-align: center;
        }

        .security-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .security-buttons {
            display: flex;
            gap: 10px;
        }

        .security-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .unlock-btn {
            background: var(--success);
            color: white;
        }

        .cancel-btn {
            background: var(--danger);
            color: white;
        }

        .command-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            border-left: 5px solid var(--ghana-red);
        }

        .command-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
        }

        .command-input {
            display: flex;
            gap: 10px;
        }

        .command-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .command-input button {
            padding: 12px 20px;
            background: var(--info);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .command-input button:hover {
            background: #2980b9;
        }

        .command-output {
            margin-top: 15px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            min-height: 60px;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 168, 107, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 168, 107, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 168, 107, 0); }
        }

        /* Progress Alignment Styles */
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            height: 20px;
            margin-top: 5px;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-low {
            background-color: var(--danger);
        }

        .progress-medium {
            background-color: var(--warning);
        }

        .progress-high {
            background-color: var(--success);
        }

        .progress-percentage {
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 3px;
            text-align: center;
        }

        .progress-cell {
            min-width: 120px;
        }

        .stock-alert {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .alert-low {
            background-color: #ffebee;
            color: var(--danger);
        }

        .alert-medium {
            background-color: #fff8e1;
            color: var(--warning);
        }

        .alert-high {
            background-color: #e8f5e9;
            color: var(--success);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .dashboard-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e0e0;
        }

        .dashboard-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dashboard-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .dashboard-progress {
            margin-top: 15px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .align-btn {
            background: var(--info);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .align-btn:hover {
            background: #2980b9;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-action-btn {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .quick-action-btn:hover {
            background: #f5f7fa;
            transform: translateY(-2px);
        }

        .linked-row {
            background-color: #f0f7ff !important;
            border-left: 4px solid var(--info);
        }

        .clickable {
            cursor: pointer;
            transition: background 0.2s;
        }

        .clickable:hover {
            background-color: #e3f2fd !important;
        }

        .adjust-modal, .sale-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .adjust-form, .sale-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 500px;
            max-width: 90%;
        }

        .adjust-form h2, .sale-form h2 {
            margin-bottom: 20px;
            color: var(--primary);
            text-align: center;
        }

        .adjust-form .form-group, .sale-form .form-group {
            margin-bottom: 20px;
        }

        .adjust-buttons, .sale-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .adjust-buttons button, .sale-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .apply-btn {
            background: var(--success);
            color: white;
        }

        .cancel-adjust-btn {
            background: var(--danger);
            color: white;
        }

        .linked-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            background: #e3f2fd;
            color: var(--info);
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .currency {
            color: var(--ghana-green);
            font-weight: bold;
        }

        .sale-btn {
            background: var(--ghana-red);
            color: white;
        }

        .sale-btn:hover {
            background: #a50e20;
        }

        @media (max-width: 1100px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
           
            .stats {
                width: 100%;
                justify-content: space-around;
            }
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
           
            .search-box {
                max-width: 100%;
            }
           
            .form-grid {
                grid-template-columns: 1fr;
            }
           
            th, td {
                padding: 12px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-boxes"></i>
                    <h1>Ghana Stock Management System</h1>
                </div>
                <div class="security-panel">
                    <button class="lock-btn" id="lock-btn">
                        <i class="fas fa-lock"></i> Lock System
                    </button>
                </div>
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-value" id="total-items">0</div>
                        <div class="stat-label">Total Items</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="total-value">Ghc 0.00</div>
                        <div class="stat-label">Total Stock Value</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="low-stock">0</div>
                        <div class="stat-label">Low Stock Items</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="quick-actions fade-in">
            <button class="quick-action-btn" id="quick-purchase">
                <i class="fas fa-cart-plus"></i> Quick Purchase
            </button>
            <button class="quick-action-btn" id="quick-sale">
                <i class="fas fa-cash-register"></i> Quick Sale
            </button>
            <button class="quick-action-btn" id="quick-adjust">
                <i class="fas fa-sliders-h"></i> Quick Adjust Stock
            </button>
            <button class="quick-action-btn" id="sync-data">
                <i class="fas fa-sync-alt"></i> Sync All Data
            </button>
        </div>

        <div class="dashboard fade-in">
            <div class="dashboard-card">
                <h2 class="dashboard-title"><i class="fas fa-chart-line"></i> Stock Health</h2>
                <div class="dashboard-value" id="stock-health">0%</div>
                <div class="progress-container">
                    <div class="progress-bar progress-high" id="health-bar" style="width: 0%"></div>
                </div>
                <div class="progress-label">
                    <span>Low</span>
                    <span>Optimal</span>
                </div>
            </div>
            <div class="dashboard-card">
                <h2 class="dashboard-title"><i class="fas fa-exclamation-triangle"></i> Attention Needed</h2>
                <div class="dashboard-value" id="attention-items">0</div>
                <p>Items requiring restock or price adjustment</p>
            </div>
            <div class="dashboard-card">
                <h2 class="dashboard-title"><i class="fas fa-money-bill-wave"></i> Today's Sales</h2>
                <div class="dashboard-value" id="today-sales">Ghc 0.00</div>
                <p>Total sales for today</p>
            </div>
        </div>

        <div class="command-panel fade-in">
            <h2 class="command-title">Command Center</h2>
            <div class="command-input">
                <input type="text" id="command-input" placeholder="Enter command (e.g., 'purchase laptop 5', 'sale laptop 2', 'adjust stock +10')">
                <button id="execute-command"><i class="fas fa-terminal"></i> Execute</button>
            </div>
            <div class="command-output" id="command-output">
                System ready. Enter a command to begin.
            </div>
        </div>

        <div class="combo-section fade-in">
            <h2 class="combo-title">Smart Combo Control</h2>
            <div class="combo-controls">
                <select id="header-selector">
                    <option value="">Select Table Header</option>
                    <option value="name">Item Name</option>
                    <option value="category">Category</option>
                    <option value="quantity">Quantity</option>
                    <option value="costPrice">Cost Price</option>
                    <option value="sellingPrice">Selling Price</option>
                    <option value="profitMargin">Profit Margin</option>
                    <option value="totalValue">Total Value</option>
                    <option value="stockLevel">Stock Level</option>
                </select>
                <input type="text" id="combo-value" placeholder="Enter value to filter">
                <button id="apply-combo"><i class="fas fa-filter"></i> Apply Filter</button>
                <button id="auto-fill"><i class="fas fa-magic"></i> Auto Fill</button>
                <button id="link-tables"><i class="fas fa-link"></i> Link Tables</button>
            </div>
        </div>

        <div class="controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="search-input" placeholder="Search items...">
            </div>
            <div class="filter-controls">
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="electronics">Electronics</option>
                    <option value="clothing">Clothing</option>
                    <option value="food">Food</option>
                    <option value="home">Home & Garden</option>
                    <option value="Books">Books</option>
                    <option value="Cars">Cars</option>
                    <option value="Bobles">Bobles</option>
                    <option value="MATHEMATICAL SET">MATHEMATICAL SET</option>
                    <option value="PLASTIC ">PLASTICS</option>
                      <option value="Storm spray">Storm spray</option>
                    <option value="kid bags">kid bags</option>
                    <option value="Magic Spirit">Magic Spirit</option>
                    <option value="Magic Cube">Magic Cube</option>
                </select>
                <button id="add-item-btn"><i class="fas fa-plus"></i> Add New Item</button>
            </div>
        </div>

        <div class="table-container fade-in" id="stock-table-container">
            <div class="table-title">
                <span>Stock Inventory <span class="linked-indicator" id="stock-linked-count">0 Linked</span></span>
                <div class="table-actions">
                    <button class="save-btn" id="save-stock"><i class="fas fa-save"></i> Save</button>
                    <button class="clear-btn" id="clear-stock"><i class="fas fa-trash"></i> Clear</button>
                </div>
            </div>
            <table id="stock-table">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Category</th>
                        <th>Quantity</th>
                        <th>Stock Level</th>
                        <th>Cost Price</th>
                        <th>Selling Price</th>
                        <th>Profit Margin</th>
                        <th>Total Value</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="stock-table-body">
                    <!-- Items will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="table-container fade-in" id="purchase-table-container">
            <div class="table-title">
                <span>Purchase Records <span class="linked-indicator" id="purchase-linked-count">0 Linked</span></span>
                <div class="table-actions">
                    <button class="save-btn" id="save-purchase"><i class="fas fa-save"></i> Save</button>
                    <button class="clear-btn" id="clear-purchase"><i class="fas fa-trash"></i> Clear</button>
                </div>
            </div>
            <table id="purchase-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Item Name</th>
                        <th>Category</th>
                        <th>Quantity</th>
                        <th>Cost Price</th>
                        <th>Total Cost</th>
                        <th>Stock Impact</th>
                        <th>Linked Item</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="purchase-table-body">
                    <!-- Purchase records will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="table-container fade-in" id="sales-table-container">
            <div class="table-title">
                <span>Sales Records</span>
                <div class="table-actions">
                    <button class="save-btn" id="save-sales"><i class="fas fa-save"></i> Save</button>
                    <button class="clear-btn" id="clear-sales"><i class="fas fa-trash"></i> Clear</button>
                </div>
            </div>
            <table id="sales-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Item Name</th>
                        <th>Category</th>
                        <th>Quantity</th>
                        <th>Selling Price</th>
                        <th>Total Sale</th>
                        <th>Remaining Stock</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="sales-table-body">
                    <!-- Sales records will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="add-item-form" id="add-item-form" style="display: none;">
            <h2 class="form-title">Add New Item</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="item-name">Item Name</label>
                    <input type="text" id="item-name" placeholder="Enter item name">
                </div>
                <div class="form-group">
                    <label for="item-category">Category</label>
                    <select id="item-category">
                        <option value="electronics">Electronics</option>
                        <option value="clothing">Clothing</option>
                        <option value="food">Food</option>
                        <option value="home">Home & Garden</option>
                        <option value="electronics">Electronics</option>
                        <option value="Books">Books</option>
                        <option value="Cars">Cars</option>
                        <option value="Bobles">Bobles</option>
                        <option value="MATHEMATICAL SET">MATHEMATICAL SET</option>
                        <option value="PLASTIC ">PLASTICS</option>
                        <option value="Storm spray">Storm spray</option>
                        <option value="kid bags">kid bags</option>
                        <option value="Magic Spirit">Magic Spirit</option>
                        <option value="Magic Cube">Magic Cube</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="item-quantity">Quantity</label>
                    <input type="number" id="item-quantity" min="0" value="0">
                </div>
                <div class="form-group">
                    <label for="item-target">Target Stock</label>
                    <input type="number" id="item-target" min="0" value="50">
                </div>
                <div class="form-group">
                    <label for="item-cost">Cost Price (<span class="currency">Ghc</span>)</label>
                    <input type="number" id="item-cost" min="0" step="0.01" value="0.00">
                </div>
                <div class="form-group">
                    <label for="item-price">Selling Price (<span class="currency">Ghc</span>)</label>
                    <input type="number" id="item-price" min="0" step="0.01" value="0.00">
                </div>
            </div>
            <button class="submit-btn" id="submit-item">Add Item</button>
        </div>

        <div class="security-modal" id="security-modal" style="display: none;">
            <div class="security-form">
                <h2><i class="fas fa-lock"></i> System Locked</h2>
                <p>Enter security password to unlock:</p>
                <input type="password" id="security-password" placeholder="Enter password">
                <div class="security-buttons">
                    <button class="unlock-btn" id="unlock-btn">Unlock</button>
                    <button class="cancel-btn" id="cancel-btn">Cancel</button>
                </div>
            </div>
        </div>

        <div class="adjust-modal" id="adjust-modal" style="display: none;">
            <div class="adjust-form">
                <h2><i class="fas fa-sliders-h"></i> Adjust Stock</h2>
                <div class="form-group">
                    <label for="adjust-item">Select Item</label>
                    <select id="adjust-item">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="adjust-quantity">Adjustment Quantity</label>
                    <input type="number" id="adjust-quantity" value="0">
                    <small>Use positive numbers to add stock, negative to remove</small>
                </div>
                <div class="form-group">
                    <label for="adjust-reason">Reason for Adjustment</label>
                    <select id="adjust-reason">
                        <option value="restock">Restock</option>
                        <option value="sale">Sale</option>
                        <option value="damage">Damage/Loss</option>
                        <option value="return">Customer Return</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="adjust-buttons">
                    <button class="apply-btn" id="apply-adjustment">Apply Adjustment</button>
                    <button class="cancel-adjust-btn" id="cancel-adjustment">Cancel</button>
                </div>
            </div>
        </div>

        <div class="sale-modal" id="sale-modal" style="display: none;">
            <div class="sale-form">
                <h2><i class="fas fa-cash-register"></i> Record Sale</h2>
                <div class="form-group">
                    <label for="sale-item">Select Item</label>
                    <select id="sale-item">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="sale-quantity">Sale Quantity</label>
                    <input type="number" id="sale-quantity" value="1" min="1">
                </div>
                <div class="form-group">
                    <label for="sale-price">Selling Price (<span class="currency">Ghc</span>)</label>
                    <input type="number" id="sale-price" min="0" step="0.01">
                </div>
                <div class="sale-buttons">
                    <button class="apply-btn" id="apply-sale">Record Sale</button>
                    <button class="cancel-adjust-btn" id="cancel-sale">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced initial data with linked records and Ghana Cedis
        let stockItems = [
            { id: 1, name: "Laptop", category: "electronics", quantity: 15, targetStock: 30, costPrice: 750.00, sellingPrice: 999.99, linkedPurchases: [1] },
            { id: 2, name: "T-Shirt", category: "clothing", quantity: 50, targetStock: 100, costPrice: 8.50, sellingPrice: 19.99, linkedPurchases: [2] },
            { id: 3, name: "Coffee Beans", category: "food", quantity: 30, targetStock: 50, costPrice: 12.00, sellingPrice: 24.99, linkedPurchases: [3] },
            { id: 4, name: "Desk Lamp", category: "home", quantity: 25, targetStock: 40, costPrice: 15.75, sellingPrice: 29.99, linkedPurchases: [] },
            { id: 5, name: "Smartphone", category: "electronics", quantity: 22, targetStock: 35, costPrice: 450.00, sellingPrice: 699.99, linkedPurchases: [] },
            { id: 6, name: "Jeans", category: "clothing", quantity: 40, targetStock: 80, costPrice: 20.00, sellingPrice: 49.99, linkedPurchases: [] },
            { id: 7, name: "Chocolate Bar", category: "food", quantity: 100, targetStock: 200, costPrice: 1.50, sellingPrice: 3.99, linkedPurchases: [] },
            { id: 8, name: "Plant Pot", category: "home", quantity: 35, targetStock: 60, costPrice: 7.25, sellingPrice: 14.99, linkedPurchases: [] }
        ];

        let purchaseRecords = [
            { id: 1, date: "2023-10-15", time: "14:30", name: "Laptop", category: "electronics", quantity: 5, costPrice: 750.00, linkedItemId: 1 },
            { id: 2, date: "2023-10-16", time: "10:15", name: "T-Shirt", category: "clothing", quantity: 25, costPrice: 8.50, linkedItemId: 2 },
            { id: 3, date: "2023-10-17", time: "09:45", name: "Coffee Beans", category: "food", quantity: 10, costPrice: 12.00, linkedItemId: 3 }
        ];

        let salesRecords = [
            { id: 1, date: "2023-10-18", time: "11:20", name: "Laptop", category: "electronics", quantity: 2, sellingPrice: 999.99, linkedItemId: 1 },
            { id: 2, date: "2023-10-18", time: "14:45", name: "T-Shirt", category: "clothing", quantity: 5, sellingPrice: 19.99, linkedItemId: 2 }
        ];

        // Security settings
        const SECURITY_PASSWORD = "admin123";
        let isLocked = false;

        // DOM Elements
        const stockTableBody = document.getElementById('stock-table-body');
        const purchaseTableBody = document.getElementById('purchase-table-body');
        const salesTableBody = document.getElementById('sales-table-body');
        const searchInput = document.getElementById('search-input');
        const categoryFilter = document.getElementById('category-filter');
        const addItemBtn = document.getElementById('add-item-btn');
        const addItemForm = document.getElementById('add-item-form');
        const submitItemBtn = document.getElementById('submit-item');
        const totalItemsEl = document.getElementById('total-items');
        const totalValueEl = document.getElementById('total-value');
        const lowStockEl = document.getElementById('low-stock');
        const lockBtn = document.getElementById('lock-btn');
        const securityModal = document.getElementById('security-modal');
        const unlockBtn = document.getElementById('unlock-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const securityPassword = document.getElementById('security-password');
        const headerSelector = document.getElementById('header-selector');
        const comboValue = document.getElementById('combo-value');
        const applyCombo = document.getElementById('apply-combo');
        const autoFill = document.getElementById('auto-fill');
        const linkTables = document.getElementById('link-tables');
        const commandInput = document.getElementById('command-input');
        const executeCommand = document.getElementById('execute-command');
        const commandOutput = document.getElementById('command-output');
        const saveStockBtn = document.getElementById('save-stock');
        const clearStockBtn = document.getElementById('clear-stock');
        const savePurchaseBtn = document.getElementById('save-purchase');
        const clearPurchaseBtn = document.getElementById('clear-purchase');
        const saveSalesBtn = document.getElementById('save-sales');
        const clearSalesBtn = document.getElementById('clear-sales');
        const stockHealthEl = document.getElementById('stock-health');
        const healthBar = document.getElementById('health-bar');
        const attentionItemsEl = document.getElementById('attention-items');
        const todaySalesEl = document.getElementById('today-sales');
        const stockLinkedCount = document.getElementById('stock-linked-count');
        const purchaseLinkedCount = document.getElementById('purchase-linked-count');
        const quickPurchaseBtn = document.getElementById('quick-purchase');
        const quickSaleBtn = document.getElementById('quick-sale');
        const quickAdjustBtn = document.getElementById('quick-adjust');
        const syncDataBtn = document.getElementById('sync-data');
        const adjustModal = document.getElementById('adjust-modal');
        const adjustItem = document.getElementById('adjust-item');
        const adjustQuantity = document.getElementById('adjust-quantity');
        const adjustReason = document.getElementById('adjust-reason');
        const applyAdjustment = document.getElementById('apply-adjustment');
        const cancelAdjustment = document.getElementById('cancel-adjustment');
        const saleModal = document.getElementById('sale-modal');
        const saleItem = document.getElementById('sale-item');
        const saleQuantity = document.getElementById('sale-quantity');
        const salePrice = document.getElementById('sale-price');
        const applySale = document.getElementById('apply-sale');
        const cancelSale = document.getElementById('cancel-sale');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderStockTable();
            renderPurchaseTable();
            renderSalesTable();
            updateStats();
            updateDashboard();
            updateLinkedCounts();
           
            // Event Listeners
            searchInput.addEventListener('input', filterItems);
            categoryFilter.addEventListener('change', filterItems);
            addItemBtn.addEventListener('click', toggleAddItemForm);
            submitItemBtn.addEventListener('click', addNewItem);
            lockBtn.addEventListener('click', toggleLock);
            unlockBtn.addEventListener('click', unlockSystem);
            cancelBtn.addEventListener('click', cancelUnlock);
            applyCombo.addEventListener('click', applyComboFilter);
            autoFill.addEventListener('click', autoFillData);
            linkTables.addEventListener('click', linkAllTables);
            executeCommand.addEventListener('click', executeCommandHandler);
            commandInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') executeCommandHandler();
            });
            saveStockBtn.addEventListener('click', saveStockData);
            clearStockBtn.addEventListener('click', clearStockData);
            savePurchaseBtn.addEventListener('click', savePurchaseData);
            clearPurchaseBtn.addEventListener('click', clearPurchaseData);
            saveSalesBtn.addEventListener('click', saveSalesData);
            clearSalesBtn.addEventListener('click', clearSalesData);
            quickPurchaseBtn.addEventListener('click', showQuickPurchase);
            quickSaleBtn.addEventListener('click', showSaleModal);
            quickAdjustBtn.addEventListener('click', showAdjustModal);
            syncDataBtn.addEventListener('click', syncAllData);
            applyAdjustment.addEventListener('click', applyStockAdjustment);
            cancelAdjustment.addEventListener('click', cancelStockAdjustment);
            applySale.addEventListener('click', applySaleRecord);
            cancelSale.addEventListener('click', cancelSaleRecord);
        });

        // Render the stock table
        function renderStockTable(items = stockItems) {
            stockTableBody.innerHTML = '';
           
            items.forEach(item => {
                const profitMargin = ((item.sellingPrice - item.costPrice) / item.costPrice * 100).toFixed(2);
                const totalValue = (item.quantity * item.sellingPrice).toFixed(2);
                const stockLevel = calculateStockLevel(item.quantity, item.targetStock);
                const progressPercentage = Math.min(100, (item.quantity / item.targetStock) * 100);
                const isLinked = item.linkedPurchases && item.linkedPurchases.length > 0;
               
                const row = document.createElement('tr');
                if (isLinked) row.classList.add('linked-row');
                row.innerHTML = `
                    <td class="clickable" data-id="${item.id}" data-type="stock">${item.name} ${isLinked ? '<span class="linked-indicator"><i class="fas fa-link"></i></span>' : ''}</td>
                    <td><span class="category ${item.category}">${formatCategory(item.category)}</span></td>
                    <td><input type="number" value="${item.quantity}" min="0" data-id="${item.id}" data-field="quantity"></td>
                    <td class="progress-cell">
                        <div class="progress-container">
                            <div class="progress-bar ${getProgressBarClass(stockLevel)}" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="progress-percentage">${progressPercentage.toFixed(1)}%</div>
                        <div class="stock-alert ${getAlertClass(stockLevel)}">
                            <i class="fas ${getAlertIcon(stockLevel)}"></i> ${stockLevel}
                        </div>
                    </td>
                    <td><input type="number" value="${item.costPrice.toFixed(2)}" min="0" step="0.01" data-id="${item.id}" data-field="costPrice"></td>
                    <td><input type="number" value="${item.sellingPrice.toFixed(2)}" min="0" step="0.01" data-id="${item.id}" data-field="sellingPrice"></td>
                    <td class="profit-margin ${parseFloat(profitMargin) >= 0 ? 'positive' : 'negative'}">${profitMargin}%</td>
                    <td>Ghc ${totalValue}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${item.id}"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn" data-id="${item.id}"><i class="fas fa-trash"></i></button>
                        <button class="purchase-btn" data-id="${item.id}" data-name="${item.name}" data-category="${item.category}" data-cost="${item.costPrice}"><i class="fas fa-cart-plus"></i></button>
                        <button class="sale-btn" data-id="${item.id}" data-name="${item.name}" data-category="${item.category}" data-price="${item.sellingPrice}"><i class="fas fa-cash-register"></i></button>
                    </td>
                `;
               
                stockTableBody.appendChild(row);
            });
           
            // Add event listeners to input fields
            document.querySelectorAll('#stock-table-body input[type="number"]').forEach(input => {
                input.addEventListener('change', updateItemField);
            });
           
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn').forEach(button => {
                button.addEventListener('click', editItem);
            });
           
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', deleteItem);
            });

            document.querySelectorAll('.purchase-btn').forEach(button => {
                button.addEventListener('click', addPurchaseRecord);
            });

            document.querySelectorAll('.sale-btn').forEach(button => {
                button.addEventListener('click', quickSaleFromTable);
            });

            // Add click event to linked rows
            document.querySelectorAll('.clickable[data-type="stock"]').forEach(cell => {
                cell.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    highlightLinkedRecords(id, 'stock');
                });
            });
        }

        // Render the purchase table
        function renderPurchaseTable(records = purchaseRecords) {
            purchaseTableBody.innerHTML = '';
           
            records.forEach(record => {
                const totalCost = (record.quantity * record.costPrice).toFixed(2);
                const stockItem = stockItems.find(item => item.id === record.linkedItemId);
                const stockLevel = stockItem ? calculateStockLevel(stockItem.quantity, stockItem.targetStock) : 'Unknown';
                const progressPercentage = stockItem ? Math.min(100, (stockItem.quantity / stockItem.targetStock) * 100) : 0;
                const isLinked = record.linkedItemId !== undefined;
               
                const row = document.createElement('tr');
                if (isLinked) row.classList.add('linked-row');
                row.innerHTML = `
                    <td>${record.date}</td>
                    <td>${record.time}</td>
                    <td class="clickable" data-id="${record.id}" data-type="purchase">${record.name} ${isLinked ? '<span class="linked-indicator"><i class="fas fa-link"></i></span>' : ''}</td>
                    <td><span class="category ${record.category}">${formatCategory(record.category)}</span></td>
                    <td>${record.quantity}</td>
                    <td>Ghc ${record.costPrice.toFixed(2)}</td>
                    <td>Ghc ${totalCost}</td>
                    <td class="progress-cell">
                        <div class="progress-container">
                            <div class="progress-bar ${getProgressBarClass(stockLevel)}" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="progress-percentage">${progressPercentage.toFixed(1)}%</div>
                        <div class="stock-alert ${getAlertClass(stockLevel)}">
                            <i class="fas ${getAlertIcon(stockLevel)}"></i> ${stockLevel}
                        </div>
                    </td>
                    <td>${isLinked ? 'Linked' : 'Not Linked'}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${record.id}" data-type="purchase"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn" data-id="${record.id}" data-type="purchase"><i class="fas fa-trash"></i></button>
                        <button class="link-btn" data-id="${record.id}" data-name="${record.name}"><i class="fas fa-link"></i></button>
                    </td>
                `;
               
                purchaseTableBody.appendChild(row);
            });
           
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn[data-type="purchase"]').forEach(button => {
                button.addEventListener('click', editPurchaseRecord);
            });
           
            document.querySelectorAll('.delete-btn[data-type="purchase"]').forEach(button => {
                button.addEventListener('click', deletePurchaseRecord);
            });

            document.querySelectorAll('.link-btn').forEach(button => {
                button.addEventListener('click', linkPurchaseRecord);
            });

            // Add click event to linked rows
            document.querySelectorAll('.clickable[data-type="purchase"]').forEach(cell => {
                cell.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    highlightLinkedRecords(id, 'purchase');
                });
            });
        }

        // Render the sales table
        function renderSalesTable(records = salesRecords) {
            salesTableBody.innerHTML = '';
           
            records.forEach(record => {
                const totalSale = (record.quantity * record.sellingPrice).toFixed(2);
                const stockItem = stockItems.find(item => item.id === record.linkedItemId);
                const remainingStock = stockItem ? stockItem.quantity : 'Unknown';
               
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.date}</td>
                    <td>${record.time}</td>
                    <td>${record.name}</td>
                    <td><span class="category ${record.category}">${formatCategory(record.category)}</span></td>
                    <td>${record.quantity}</td>
                    <td>Ghc ${record.sellingPrice.toFixed(2)}</td>
                    <td>Ghc ${totalSale}</td>
                    <td>${remainingStock}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${record.id}" data-type="sale"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn" data-id="${record.id}" data-type="sale"><i class="fas fa-trash"></i></button>
                    </td>
                `;
               
                salesTableBody.appendChild(row);
            });
           
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn[data-type="sale"]').forEach(button => {
                button.addEventListener('click', editSaleRecord);
            });
           
            document.querySelectorAll('.delete-btn[data-type="sale"]').forEach(button => {
                button.addEventListener('click', deleteSaleRecord);
            });
        }

        // Highlight linked records between tables
        function highlightLinkedRecords(id, type) {
            // Remove previous highlights
            document.querySelectorAll('.linked-row').forEach(row => {
                row.style.backgroundColor = '';
            });
           
            if (type === 'stock') {
                const item = stockItems.find(item => item.id === id);
                if (item && item.linkedPurchases) {
                    // Highlight linked purchase records
                    item.linkedPurchases.forEach(purchaseId => {
                        const purchaseRow = document.querySelector(`tr:has(td.clickable[data-id="${purchaseId}"])`);
                        if (purchaseRow) {
                            purchaseRow.style.backgroundColor = '#e3f2fd';
                            purchaseRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    });
                   
                    // Highlight the stock item itself
                    const stockRow = document.querySelector(`tr:has(td.clickable[data-id="${id}"])`);
                    if (stockRow) {
                        stockRow.style.backgroundColor = '#e3f2fd';
                        stockRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            } else if (type === 'purchase') {
                const purchase = purchaseRecords.find(record => record.id === id);
                if (purchase && purchase.linkedItemId) {
                    // Highlight linked stock item
                    const stockRow = document.querySelector(`tr:has(td.clickable[data-id="${purchase.linkedItemId}"])`);
                    if (stockRow) {
                        stockRow.style.backgroundColor = '#e3f2fd';
                        stockRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                   
                    // Highlight the purchase record itself
                    const purchaseRow = document.querySelector(`tr:has(td.clickable[data-id="${id}"])`);
                    if (purchaseRow) {
                        purchaseRow.style.backgroundColor = '#e3f2fd';
                        purchaseRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }
        }

        // Calculate stock level based on quantity and target
        function calculateStockLevel(quantity, target) {
            const percentage = (quantity / target) * 100;
           
            if (percentage >= 80) return 'High';
            if (percentage >= 40) return 'Medium';
            return 'Low';
        }

        // Get progress bar class based on stock level
        function getProgressBarClass(stockLevel) {
            switch(stockLevel) {
                case 'High': return 'progress-high';
                case 'Medium': return 'progress-medium';
                case 'Low': return 'progress-low';
                default: return 'progress-low';
            }
        }

        // Get alert class based on stock level
        function getAlertClass(stockLevel) {
            switch(stockLevel) {
                case 'High': return 'alert-high';
                case 'Medium': return 'alert-medium';
                case 'Low': return 'alert-low';
                default: return 'alert-low';
            }
        }

        // Get alert icon based on stock level
        function getAlertIcon(stockLevel) {
            switch(stockLevel) {
                case 'High': return 'fa-check-circle';
                case 'Medium': return 'fa-exclamation-circle';
                case 'Low': return 'fa-exclamation-triangle';
                default: return 'fa-question-circle';
            }
        }

        // Update item field when input changes
        function updateItemField(e) {
            if (isLocked) return;
           
            const id = parseInt(e.target.getAttribute('data-id'));
            const field = e.target.getAttribute('data-field');
            const value = field === 'quantity' ? parseInt(e.target.value) : parseFloat(e.target.value);
           
            const itemIndex = stockItems.findIndex(item => item.id === id);
            if (itemIndex !== -1) {
                stockItems[itemIndex][field] = value;
                updateStats();
                updateDashboard();
                renderStockTable();
               
                // Add animation effect
                e.target.parentElement.classList.add('pulse');
                setTimeout(() => {
                    e.target.parentElement.classList.remove('pulse');
                }, 1500);
            }
        }

        // Format category for display
        function formatCategory(category) {
            const categories = {
                'electronics': 'Electronics',
                'clothing': 'Clothing',
                'food': 'Food',
                'home': 'Home & Garden'
            };
            return categories[category] || category;
        }

        // Filter items based on search and category
        function filterItems() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categoryFilter.value;
           
            let filteredItems = stockItems;
           
            if (searchTerm) {
                filteredItems = filteredItems.filter(item =>
                    item.name.toLowerCase().includes(searchTerm)
                );
            }
           
            if (category !== 'all') {
                filteredItems = filteredItems.filter(item => item.category === category);
            }
           
            renderStockTable(filteredItems);
        }

        // Toggle the add item form
        function toggleAddItemForm() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            addItemForm.style.display = addItemForm.style.display === 'none' ? 'block' : 'none';
           
            // Add animation
            if (addItemForm.style.display === 'block') {
                addItemForm.classList.add('fade-in');
            }
        }

        // Add a new item
        function addNewItem() {
            if (isLocked) return;
           
            const name = document.getElementById('item-name').value;
            const category = document.getElementById('item-category').value;
            const quantity = parseInt(document.getElementById('item-quantity').value);
            const targetStock = parseInt(document.getElementById('item-target').value);
            const costPrice = parseFloat(document.getElementById('item-cost').value);
            const sellingPrice = parseFloat(document.getElementById('item-price').value);
           
            if (!name) {
                alert('Please enter an item name');
                return;
            }
           
            const newId = stockItems.length > 0 ? Math.max(...stockItems.map(item => item.id)) + 1 : 1;
           
            stockItems.push({
                id: newId,
                name,
                category,
                quantity,
                targetStock,
                costPrice,
                sellingPrice,
                linkedPurchases: []
            });
           
            // Reset form
            document.getElementById('item-name').value = '';
            document.getElementById('item-quantity').value = '0';
            document.getElementById('item-target').value = '50';
            document.getElementById('item-cost').value = '0.00';
            document.getElementById('item-price').value = '0.00';
           
            // Hide form and update table
            addItemForm.style.display = 'none';
            updateStats();
            updateDashboard();
            updateLinkedCounts();
            renderStockTable();
           
            // Show success message
            commandOutput.textContent = `Item "${name}" added successfully!`;
            commandOutput.style.color = 'var(--success)';
        }

        // Edit item
        function editItem(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const item = stockItems.find(item => item.id === id);
           
            if (item) {
                document.getElementById('item-name').value = item.name;
                document.getElementById('item-category').value = item.category;
                document.getElementById('item-quantity').value = item.quantity;
                document.getElementById('item-target').value = item.targetStock;
                document.getElementById('item-cost').value = item.costPrice;
                document.getElementById('item-price').value = item.sellingPrice;
               
                // Change button text and functionality
                submitItemBtn.textContent = 'Update Item';
                submitItemBtn.onclick = function() {
                    updateItem(id);
                };
               
                // Show form
                addItemForm.style.display = 'block';
                addItemForm.classList.add('fade-in');
            }
        }

        // Update existing item
        function updateItem(id) {
            if (isLocked) return;
           
            const name = document.getElementById('item-name').value;
            const category = document.getElementById('item-category').value;
            const quantity = parseInt(document.getElementById('item-quantity').value);
            const targetStock = parseInt(document.getElementById('item-target').value);
            const costPrice = parseFloat(document.getElementById('item-cost').value);
            const sellingPrice = parseFloat(document.getElementById('item-price').value);
           
            if (!name) {
                alert('Please enter an item name');
                return;
            }
           
            const itemIndex = stockItems.findIndex(item => item.id === id);
            if (itemIndex !== -1) {
                stockItems[itemIndex].name = name;
                stockItems[itemIndex].category = category;
                stockItems[itemIndex].quantity = quantity;
                stockItems[itemIndex].targetStock = targetStock;
                stockItems[itemIndex].costPrice = costPrice;
                stockItems[itemIndex].sellingPrice = sellingPrice;
            }
           
            // Reset form and button
            document.getElementById('item-name').value = '';
            document.getElementById('item-quantity').value = '0';
            document.getElementById('item-target').value = '50';
            document.getElementById('item-cost').value = '0.00';
            document.getElementById('item-price').value = '0.00';
            submitItemBtn.textContent = 'Add Item';
            submitItemBtn.onclick = addNewItem;
           
            // Hide form and update table
            addItemForm.style.display = 'none';
            updateStats();
            updateDashboard();
            renderStockTable();
           
            // Show success message
            commandOutput.textContent = `Item "${name}" updated successfully!`;
            commandOutput.style.color = 'var(--success)';
        }

        // Delete item
        function deleteItem(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const item = stockItems.find(item => item.id === id);
           
            if (item && confirm(`Are you sure you want to delete "${item.name}"? This will also remove linked purchase records.`)) {
                // Remove linked purchase records
                purchaseRecords = purchaseRecords.filter(record => record.linkedItemId !== id);
               
                // Remove the item
                stockItems = stockItems.filter(item => item.id !== id);
                updateStats();
                updateDashboard();
                updateLinkedCounts();
                renderStockTable();
                renderPurchaseTable();
               
                // Show success message
                commandOutput.textContent = `Item "${item.name}" and linked purchases deleted successfully!`;
                commandOutput.style.color = 'var(--success)';
            }
        }

        // Add purchase record
        function addPurchaseRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const name = e.currentTarget.getAttribute('data-name');
            const category = e.currentTarget.getAttribute('data-category');
            const costPrice = parseFloat(e.currentTarget.getAttribute('data-cost'));
           
            const quantity = parseInt(prompt(`Enter quantity for ${name}:`, "1"));
           
            if (quantity && quantity > 0) {
                const now = new Date();
                const date = now.toISOString().split('T')[0];
                const time = now.toTimeString().split(' ')[0].substring(0, 5);
               
                const newId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
               
                // Create purchase record
                const purchaseRecord = {
                    id: newId,
                    date,
                    time,
                    name,
                    category,
                    quantity,
                    costPrice,
                    linkedItemId: id
                };
               
                purchaseRecords.push(purchaseRecord);
               
                // Update stock quantity and link purchase
                const itemIndex = stockItems.findIndex(item => item.id === id);
                if (itemIndex !== -1) {
                    stockItems[itemIndex].quantity += quantity;
                    if (!stockItems[itemIndex].linkedPurchases) {
                        stockItems[itemIndex].linkedPurchases = [];
                    }
                    stockItems[itemIndex].linkedPurchases.push(newId);
                }
               
                updateStats();
                updateDashboard();
                updateLinkedCounts();
                renderStockTable();
                renderPurchaseTable();
               
                // Show success message
                commandOutput.textContent = `Purchase record for ${quantity} ${name}(s) added successfully and linked to inventory!`;
                commandOutput.style.color = 'var(--success)';
            }
        }

        // Edit purchase record
        function editPurchaseRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const record = purchaseRecords.find(record => record.id === id);
           
            if (record) {
                const newQuantity = parseInt(prompt(`Edit quantity for ${record.name}:`, record.quantity));
               
                if (newQuantity !== null && newQuantity >= 0) {
                    const oldQuantity = record.quantity;
                    record.quantity = newQuantity;
                   
                    // Update linked stock item if exists
                    if (record.linkedItemId) {
                        const itemIndex = stockItems.findIndex(item => item.id === record.linkedItemId);
                        if (itemIndex !== -1) {
                            stockItems[itemIndex].quantity += (newQuantity - oldQuantity);
                        }
                    }
                   
                    updateStats();
                    updateDashboard();
                    renderStockTable();
                    renderPurchaseTable();
                   
                    commandOutput.textContent = `Purchase record updated successfully!`;
                    commandOutput.style.color = 'var(--success)';
                }
            }
        }

        // Delete purchase record
        function deletePurchaseRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const record = purchaseRecords.find(record => record.id === id);
           
            if (record && confirm(`Are you sure you want to delete this purchase record?`)) {
                // Update linked stock item if exists
                if (record.linkedItemId) {
                    const itemIndex = stockItems.findIndex(item => item.id === record.linkedItemId);
                    if (itemIndex !== -1) {
                        stockItems[itemIndex].quantity -= record.quantity;
                        // Remove from linked purchases
                        stockItems[itemIndex].linkedPurchases = stockItems[itemIndex].linkedPurchases.filter(pId => pId !== id);
                    }
                }
               
                purchaseRecords = purchaseRecords.filter(record => record.id !== id);
                updateStats();
                updateDashboard();
                updateLinkedCounts();
                renderStockTable();
                renderPurchaseTable();
               
                // Show success message
                commandOutput.textContent = `Purchase record deleted successfully!`;
                commandOutput.style.color = 'var(--success)';
            }
        }

        // Link purchase record to stock item
        function linkPurchaseRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const name = e.currentTarget.getAttribute('data-name');
            const record = purchaseRecords.find(record => record.id === id);
           
            if (record) {
                // Find matching stock item
                const matchingItem = stockItems.find(item => item.name === name);
               
                if (matchingItem) {
                    record.linkedItemId = matchingItem.id;
                   
                    if (!matchingItem.linkedPurchases) {
                        matchingItem.linkedPurchases = [];
                    }
                   
                    if (!matchingItem.linkedPurchases.includes(id)) {
                        matchingItem.linkedPurchases.push(id);
                    }
                   
                    updateLinkedCounts();
                    renderStockTable();
                    renderPurchaseTable();
                   
                    commandOutput.textContent = `Purchase record linked to ${name} in inventory!`;
                    commandOutput.style.color = 'var(--success)';
                } else {
                    commandOutput.textContent = `No matching item found in inventory for ${name}.`;
                    commandOutput.style.color = 'var(--warning)';
                }
            }
        }

        // Link all tables automatically
        function linkAllTables() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            let linkedCount = 0;
           
            purchaseRecords.forEach(record => {
                if (!record.linkedItemId) {
                    const matchingItem = stockItems.find(item => item.name === record.name);
                    if (matchingItem) {
                        record.linkedItemId = matchingItem.id;
                       
                        if (!matchingItem.linkedPurchases) {
                            matchingItem.linkedPurchases = [];
                        }
                       
                        if (!matchingItem.linkedPurchases.includes(record.id)) {
                            matchingItem.linkedPurchases.push(record.id);
                        }
                       
                        linkedCount++;
                    }
                }
            });
           
            updateLinkedCounts();
            renderStockTable();
            renderPurchaseTable();
           
            commandOutput.textContent = `Automatically linked ${linkedCount} purchase records to inventory items!`;
            commandOutput.style.color = 'var(--success)';
        }

        // Quick sale from table button
        function quickSaleFromTable(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const name = e.currentTarget.getAttribute('data-name');
            const price = parseFloat(e.currentTarget.getAttribute('data-price'));
           
            const quantity = parseInt(prompt(`Enter sale quantity for ${name}:`, "1"));
           
            if (quantity && quantity > 0) {
                const itemIndex = stockItems.findIndex(item => item.id === id);
                if (itemIndex !== -1) {
                    const item = stockItems[itemIndex];
                   
                    if (item.quantity < quantity) {
                        alert(`Not enough stock! Only ${item.quantity} available.`);
                        return;
                    }
                   
                    // Update stock
                    item.quantity -= quantity;
                   
                    // Create sale record
                    const now = new Date();
                    const date = now.toISOString().split('T')[0];
                    const time = now.toTimeString().split(' ')[0].substring(0, 5);
                   
                    const newId = salesRecords.length > 0 ? Math.max(...salesRecords.map(record => record.id)) + 1 : 1;
                   
                    salesRecords.push({
                        id: newId,
                        date,
                        time,
                        name,
                        category: item.category,
                        quantity,
                        sellingPrice: price,
                        linkedItemId: id
                    });
                   
                    updateStats();
                    updateDashboard();
                    renderStockTable();
                    renderSalesTable();
                   
                    commandOutput.textContent = `Sale of ${quantity} ${name}(s) recorded successfully!`;
                    commandOutput.style.color = 'var(--success)';
                }
            }
        }

        // Show sale modal
        function showSaleModal() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            // Populate item dropdown
            saleItem.innerHTML = '';
            stockItems.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = `${item.name} (Stock: ${item.quantity})`;
                saleItem.appendChild(option);
            });
           
            saleQuantity.value = '1';
           
            // Set default price based on selected item
            if (stockItems.length > 0) {
                const firstItem = stockItems[0];
                salePrice.value = firstItem.sellingPrice.toFixed(2);
            }
           
            // Update price when item selection changes
            saleItem.addEventListener('change', function() {
                const selectedId = parseInt(this.value);
                const selectedItem = stockItems.find(item => item.id === selectedId);
                if (selectedItem) {
                    salePrice.value = selectedItem.sellingPrice.toFixed(2);
                }
            });
           
            saleModal.style.display = 'flex';
        }

        // Apply sale record
        function applySaleRecord() {
            const itemId = parseInt(saleItem.value);
            const quantity = parseInt(saleQuantity.value);
            const price = parseFloat(salePrice.value);
           
            if (itemId && quantity > 0 && price > 0) {
                const itemIndex = stockItems.findIndex(item => item.id === itemId);
                if (itemIndex !== -1) {
                    const item = stockItems[itemIndex];
                   
                    if (item.quantity < quantity) {
                        alert(`Not enough stock! Only ${item.quantity} available.`);
                        return;
                    }
                   
                    // Update stock
                    item.quantity -= quantity;
                   
                    // Create sale record
                    const now = new Date();
                    const date = now.toISOString().split('T')[0];
                    const time = now.toTimeString().split(' ')[0].substring(0, 5);
                   
                    const newId = salesRecords.length > 0 ? Math.max(...salesRecords.map(record => record.id)) + 1 : 1;
                   
                    salesRecords.push({
                        id: newId,
                        date,
                        time,
                        name: item.name,
                        category: item.category,
                        quantity,
                        sellingPrice: price,
                        linkedItemId: itemId
                    });
                   
                    updateStats();
                    updateDashboard();
                    renderStockTable();
                    renderSalesTable();
                   
                    saleModal.style.display = 'none';
                   
                    commandOutput.textContent = `Sale of ${quantity} ${item.name}(s) recorded successfully!`;
                    commandOutput.style.color = 'var(--success)';
                }
            }
        }

        // Cancel sale record
        function cancelSaleRecord() {
            saleModal.style.display = 'none';
        }

        // Edit sale record
        function editSaleRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const record = salesRecords.find(record => record.id === id);
           
            if (record) {
                const newQuantity = parseInt(prompt(`Edit sale quantity for ${record.name}:`, record.quantity));
               
                if (newQuantity !== null && newQuantity >= 0) {
                    const oldQuantity = record.quantity;
                    record.quantity = newQuantity;
                   
                    // Update linked stock item if exists
                    if (record.linkedItemId) {
                        const itemIndex = stockItems.findIndex(item => item.id === record.linkedItemId);
                        if (itemIndex !== -1) {
                            // Adjust stock based on quantity change
                            stockItems[itemIndex].quantity += (oldQuantity - newQuantity);
                        }
                    }
                   
                    updateStats();
                    updateDashboard();
                    renderStockTable();
                    renderSalesTable();
                   
                    commandOutput.textContent = `Sale record updated successfully!`;
                    commandOutput.style.color = 'var(--success)';
                }
            }
        }

        // Delete sale record
        function deleteSaleRecord(e) {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const id = parseInt(e.currentTarget.getAttribute('data-id'));
            const record = salesRecords.find(record => record.id === id);
           
            if (record && confirm(`Are you sure you want to delete this sale record?`)) {
                // Update linked stock item if exists
                if (record.linkedItemId) {
                    const itemIndex = stockItems.findIndex(item => item.id === record.linkedItemId);
                    if (itemIndex !== -1) {
                        stockItems[itemIndex].quantity += record.quantity;
                    }
                }
               
                salesRecords = salesRecords.filter(record => record.id !== id);
                updateStats();
                updateDashboard();
                renderStockTable();
                renderSalesTable();
               
                // Show success message
                commandOutput.textContent = `Sale record deleted successfully!`;
                commandOutput.style.color = 'var(--success)';
            }
        }

        // Update statistics
        function updateStats() {
            const totalItems = stockItems.reduce((sum, item) => sum + item.quantity, 0);
            const totalValue = stockItems.reduce((sum, item) => sum + (item.quantity * item.sellingPrice), 0);
            const lowStockCount = stockItems.filter(item => {
                const stockLevel = calculateStockLevel(item.quantity, item.targetStock);
                return stockLevel === 'Low';
            }).length;
           
            totalItemsEl.textContent = totalItems;
            totalValueEl.textContent = `Ghc ${totalValue.toFixed(2)}`;
            lowStockEl.textContent = lowStockCount;
        }

        // Update dashboard
        function updateDashboard() {
            // Calculate overall stock health
            let totalProgress = 0;
            let attentionCount = 0;
           
            stockItems.forEach(item => {
                const progress = Math.min(100, (item.quantity / item.targetStock) * 100);
                totalProgress += progress;
               
                // Count items needing attention
                if (progress < 40 || item.quantity === 0) {
                    attentionCount++;
                }
            });
           
            const averageProgress = stockItems.length > 0 ? totalProgress / stockItems.length : 0;
            stockHealthEl.textContent = `${averageProgress.toFixed(1)}%`;
            healthBar.style.width = `${averageProgress}%`;
           
            // Update health bar color
            if (averageProgress >= 70) {
                healthBar.className = 'progress-bar progress-high';
            } else if (averageProgress >= 40) {
                healthBar.className = 'progress-bar progress-medium';
            } else {
                healthBar.className = 'progress-bar progress-low';
            }
           
            attentionItemsEl.textContent = attentionCount;
           
            // Calculate today's sales
            const today = new Date().toISOString().split('T')[0];
            const todaySales = salesRecords
                .filter(record => record.date === today)
                .reduce((sum, record) => sum + (record.quantity * record.sellingPrice), 0);
           
            todaySalesEl.textContent = `Ghc ${todaySales.toFixed(2)}`;
        }

        // Update linked counts in table headers
        function updateLinkedCounts() {
            const stockLinked = stockItems.filter(item => item.linkedPurchases && item.linkedPurchases.length > 0).length;
            const purchaseLinked = purchaseRecords.filter(record => record.linkedItemId).length;
           
            stockLinkedCount.textContent = `${stockLinked} Linked`;
            purchaseLinkedCount.textContent = `${purchaseLinked} Linked`;
        }

        // Show quick purchase modal
        function showQuickPurchase() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            const itemName = prompt("Enter item name for quick purchase:");
            if (itemName) {
                const quantity = parseInt(prompt(`Enter quantity for ${itemName}:`, "1"));
                if (quantity && quantity > 0) {
                    // Check if item exists
                    let existingItem = stockItems.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                   
                    if (existingItem) {
                        // Use existing item
                        const costPrice = parseFloat(prompt(`Enter cost price for ${itemName}:`, existingItem.costPrice));
                       
                        if (costPrice !== null) {
                            const now = new Date();
                            const date = now.toISOString().split('T')[0];
                            const time = now.toTimeString().split(' ')[0].substring(0, 5);
                           
                            const newId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
                           
                            // Create purchase record
                            const purchaseRecord = {
                                id: newId,
                                date,
                                time,
                                name: itemName,
                                category: existingItem.category,
                                quantity,
                                costPrice,
                                linkedItemId: existingItem.id
                            };
                           
                            purchaseRecords.push(purchaseRecord);
                           
                            // Update stock quantity and link purchase
                            existingItem.quantity += quantity;
                            if (!existingItem.linkedPurchases) {
                                existingItem.linkedPurchases = [];
                            }
                            existingItem.linkedPurchases.push(newId);
                           
                            updateStats();
                            updateDashboard();
                            updateLinkedCounts();
                            renderStockTable();
                            renderPurchaseTable();
                           
                            commandOutput.textContent = `Quick purchase of ${quantity} ${itemName}(s) completed and linked to inventory!`;
                            commandOutput.style.color = 'var(--success)';
                        }
                    } else {
                        // Create new item
                        const category = prompt("Enter category (electronics, clothing, food, home):", "electronics");
                        const costPrice = parseFloat(prompt(`Enter cost price for ${itemName}:`, "0.00"));
                        const sellingPrice = parseFloat(prompt(`Enter selling price for ${itemName}:`, "0.00"));
                       
                        if (category && costPrice !== null && sellingPrice !== null) {
                            const newItemId = stockItems.length > 0 ? Math.max(...stockItems.map(item => item.id)) + 1 : 1;
                            const newPurchaseId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
                           
                            const now = new Date();
                            const date = now.toISOString().split('T')[0];
                            const time = now.toTimeString().split(' ')[0].substring(0, 5);
                           
                            // Create new stock item
                            stockItems.push({
                                id: newItemId,
                                name: itemName,
                                category,
                                quantity,
                                targetStock: 50,
                                costPrice,
                                sellingPrice,
                                linkedPurchases: [newPurchaseId]
                            });
                           
                            // Create purchase record
                            purchaseRecords.push({
                                id: newPurchaseId,
                                date,
                                time,
                                name: itemName,
                                category,
                                quantity,
                                costPrice,
                                linkedItemId: newItemId
                            });
                           
                            updateStats();
                            updateDashboard();
                            updateLinkedCounts();
                            renderStockTable();
                            renderPurchaseTable();
                           
                            commandOutput.textContent = `New item "${itemName}" created and ${quantity} units purchased!`;
                            commandOutput.style.color = 'var(--success)';
                        }
                    }
                }
            }
        }

        // Show adjust modal
        function showAdjustModal() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            // Populate item dropdown
            adjustItem.innerHTML = '';
            stockItems.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = `${item.name} (Current: ${item.quantity})`;
                adjustItem.appendChild(option);
            });
           
            adjustQuantity.value = '0';
            adjustReason.value = 'restock';
           
            adjustModal.style.display = 'flex';
        }

        // Apply stock adjustment
        function applyStockAdjustment() {
            const itemId = parseInt(adjustItem.value);
            const quantity = parseInt(adjustQuantity.value);
            const reason = adjustReason.value;
           
            if (itemId && quantity !== 0) {
                const itemIndex = stockItems.findIndex(item => item.id === itemId);
                if (itemIndex !== -1) {
                    const item = stockItems[itemIndex];
                    const oldQuantity = item.quantity;
                    item.quantity += quantity;
                   
                    // Create adjustment record
                    const now = new Date();
                    const date = now.toISOString().split('T')[0];
                    const time = now.toTimeString().split(' ')[0].substring(0, 5);
                   
                    const newId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
                   
                    purchaseRecords.push({
                        id: newId,
                        date,
                        time,
                        name: item.name,
                        category: item.category,
                        quantity: Math.abs(quantity),
                        costPrice: quantity > 0 ? item.costPrice : 0,
                        linkedItemId: itemId,
                        adjustment: true,
                        reason: reason,
                        adjustmentType: quantity > 0 ? 'addition' : 'reduction'
                    });
                   
                    updateStats();
                    updateDashboard();
                    updateLinkedCounts();
                    renderStockTable();
                    renderPurchaseTable();
                   
                    adjustModal.style.display = 'none';
                   
                    commandOutput.textContent = `Stock for ${item.name} adjusted from ${oldQuantity} to ${item.quantity} (${quantity > 0 ? '+' : ''}${quantity})`;
                    commandOutput.style.color = 'var(--success)';
                }
            }
        }

        // Cancel stock adjustment
        function cancelStockAdjustment() {
            adjustModal.style.display = 'none';
        }

        // Sync all data
        function syncAllData() {
            // This would typically sync with a backend
            // For now, we'll just show a message
            commandOutput.textContent = 'All data synchronized successfully!';
            commandOutput.style.color = 'var(--success)';
           
            // Add visual feedback
            document.querySelectorAll('.table-container').forEach(container => {
                container.classList.add('pulse');
                setTimeout(() => {
                    container.classList.remove('pulse');
                }, 2000);
            });
        }

        // Save and clear functions
        function saveStockData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            localStorage.setItem('stockItems', JSON.stringify(stockItems));
           
            commandOutput.textContent = 'Stock data saved successfully!';
            commandOutput.style.color = 'var(--success)';
        }

        function clearStockData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            if (confirm('Are you sure you want to clear all stock data? This action cannot be undone.')) {
                stockItems = [];
                updateStats();
                updateDashboard();
                updateLinkedCounts();
                renderStockTable();
               
                commandOutput.textContent = 'Stock data cleared successfully!';
                commandOutput.style.color = 'var(--success)';
            }
        }

        function savePurchaseData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            localStorage.setItem('purchaseRecords', JSON.stringify(purchaseRecords));
           
            commandOutput.textContent = 'Purchase data saved successfully!';
            commandOutput.style.color = 'var(--success)';
        }

        function clearPurchaseData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            if (confirm('Are you sure you want to clear all purchase data? This action cannot be undone.')) {
                purchaseRecords = [];
                // Also remove links from stock items
                stockItems.forEach(item => {
                    item.linkedPurchases = [];
                });
                updateLinkedCounts();
                renderPurchaseTable();
               
                commandOutput.textContent = 'Purchase data cleared successfully!';
                commandOutput.style.color = 'var(--success)';
            }
        }

        function saveSalesData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            localStorage.setItem('salesRecords', JSON.stringify(salesRecords));
           
            commandOutput.textContent = 'Sales data saved successfully!';
            commandOutput.style.color = 'var(--success)';
        }

        function clearSalesData() {
            if (isLocked) {
                showSecurityModal();
                return;
            }
           
            if (confirm('Are you sure you want to clear all sales data? This action cannot be undone.')) {
                salesRecords = [];
                renderSalesTable();
               
                commandOutput.textContent = 'Sales data cleared successfully!';
                commandOutput.style.color = 'var(--success)';
            }
        }

        // Security functions
        function toggleLock() {
            if (isLocked) {
                showSecurityModal();
            } else {
                lockSystem();
            }
        }

        function lockSystem() {
            isLocked = true;
            lockBtn.innerHTML = '<i class="fas fa-unlock"></i> Unlock System';
            document.getElementById('stock-table-container').classList.add('locked');
            document.getElementById('purchase-table-container').classList.add('locked');
            document.getElementById('sales-table-container').classList.add('locked');
            addItemForm.style.display = 'none';
            adjustModal.style.display = 'none';
            saleModal.style.display = 'none';
           
            commandOutput.textContent = 'System locked. Enter password to unlock.';
            commandOutput.style.color = 'var(--warning)';
        }

        function showSecurityModal() {
            securityModal.style.display = 'flex';
            securityPassword.value = '';
            securityPassword.focus();
        }

        function unlockSystem() {
            if (securityPassword.value === SECURITY_PASSWORD) {
                isLocked = false;
                securityModal.style.display = 'none';
                lockBtn.innerHTML = '<i class="fas fa-lock"></i> Lock System';
                document.getElementById('stock-table-container').classList.remove('locked');
                document.getElementById('purchase-table-container').classList.remove('locked');
                document.getElementById('sales-table-container').classList.remove('locked');
               
                commandOutput.textContent = 'System unlocked successfully!';
                commandOutput.style.
                commandOutput.textContent = 'System unlocked successfully!';
                commandOutput.style.color = 'var(--success)';
            } else {
                alert('Incorrect password!');
                securityPassword.value = '';
                securityPassword.focus();
            }
        }

        function cancelUnlock() {
            securityModal.style.display = 'none';
        }

        // Combo box functions
        function applyComboFilter() {
            const header = headerSelector.value;
            const value = comboValue.value.toLowerCase();
           
            if (!header) {
                alert('Please select a table header first');
                return;
            }
           
            let filteredItems = stockItems;
           
            if (value) {
                filteredItems = filteredItems.filter(item => {
                    if (header === 'name' || header === 'category') {
                        return item[header].toLowerCase().includes(value);
                    } else if (header === 'profitMargin') {
                        const profitMargin = ((item.sellingPrice - item.costPrice) / item.costPrice * 100).toFixed(2);
                        return profitMargin.includes(value);
                    } else if (header === 'totalValue') {
                        const totalValue = (item.quantity * item.sellingPrice).toFixed(2);
                        return totalValue.includes(value);
                    } else if (header === 'stockLevel') {
                        const stockLevel = calculateStockLevel(item.quantity, item.targetStock);
                        return stockLevel.toLowerCase().includes(value);
                    } else {
                        return item[header].toString().includes(value);
                    }
                });
            }
           
            renderStockTable(filteredItems);
           
            // Show filter result
            commandOutput.textContent = `Filtered by ${header}: "${value}" - ${filteredItems.length} items found`;
            commandOutput.style.color = 'var(--info)';
        }

        function autoFillData() {
            const header = headerSelector.value;
           
            if (!header) {
                alert('Please select a table header first');
                return;
            }
           
            let value = '';
           
            if (header === 'name') {
                value = 'New Product';
            } else if (header === 'category') {
                value = 'electronics';
            } else if (header === 'quantity') {
                value = '10';
            } else if (header === 'costPrice') {
                value = '25.00';
            } else if (header === 'sellingPrice') {
                value = '39.99';
            } else if (header === 'stockLevel') {
                value = 'Medium';
            }
           
            comboValue.value = value;
           
            // Show auto-fill message
            commandOutput.textContent = `Auto-filled ${header} with "${value}"`;
            commandOutput.style.color = 'var(--info)';
        }

        // Command execution
        function executeCommandHandler() {
            const command = commandInput.value.trim().toLowerCase();
           
            if (!command) {
                commandOutput.textContent = 'Please enter a command';
                commandOutput.style.color = 'var(--warning)';
                return;
            }
           
            // Clear input
            commandInput.value = '';
           
            // Process command
            let output = '';
            let color = 'var(--info)';
           
            if (command.startsWith('purchase ')) {
                const parts = command.split(' ');
                if (parts.length >= 3) {
                    const itemName = parts.slice(1, -1).join(' ');
                    const quantity = parseInt(parts[parts.length - 1]);
                   
                    if (itemName && quantity && quantity > 0) {
                        // Find or create item
                        let existingItem = stockItems.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                       
                        if (existingItem) {
                            // Quick purchase existing item
                            const now = new Date();
                            const date = now.toISOString().split('T')[0];
                            const time = now.toTimeString().split(' ')[0].substring(0, 5);
                           
                            const newId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
                           
                            // Create purchase record
                            const purchaseRecord = {
                                id: newId,
                                date,
                                time,
                                name: itemName,
                                category: existingItem.category,
                                quantity,
                                costPrice: existingItem.costPrice,
                                linkedItemId: existingItem.id
                            };
                           
                            purchaseRecords.push(purchaseRecord);
                           
                            // Update stock quantity and link purchase
                            existingItem.quantity += quantity;
                            if (!existingItem.linkedPurchases) {
                                existingItem.linkedPurchases = [];
                            }
                            existingItem.linkedPurchases.push(newId);
                           
                            updateStats();
                            updateDashboard();
                            updateLinkedCounts();
                            renderStockTable();
                            renderPurchaseTable();
                           
                            output = `Command executed: Purchased ${quantity} ${itemName}(s)`;
                            color = 'var(--success)';
                        } else {
                            output = `Error: Item "${itemName}" not found in inventory. Use "add ${itemName}" first.`;
                            color = 'var(--danger)';
                        }
                    } else {
                        output = 'Error: Invalid purchase command format. Use: purchase [item name] [quantity]';
                        color = 'var(--danger)';
                    }
                } else {
                    output = 'Error: Invalid purchase command format. Use: purchase [item name] [quantity]';
                    color = 'var(--danger)';
                }
            } else if (command.startsWith('sale ')) {
                const parts = command.split(' ');
                if (parts.length >= 3) {
                    const itemName = parts.slice(1, -1).join(' ');
                    const quantity = parseInt(parts[parts.length - 1]);
                   
                    if (itemName && quantity && quantity > 0) {
                        const existingItem = stockItems.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                       
                        if (existingItem) {
                            if (existingItem.quantity < quantity) {
                                output = `Error: Not enough stock! Only ${existingItem.quantity} ${itemName}(s) available.`;
                                color = 'var(--danger)';
                            } else {
                                // Update stock
                                existingItem.quantity -= quantity;
                               
                                // Create sale record
                                const now = new Date();
                                const date = now.toISOString().split('T')[0];
                                const time = now.toTimeString().split(' ')[0].substring(0, 5);
                               
                                const newId = salesRecords.length > 0 ? Math.max(...salesRecords.map(record => record.id)) + 1 : 1;
                               
                                salesRecords.push({
                                    id: newId,
                                    date,
                                    time,
                                    name: itemName,
                                    category: existingItem.category,
                                    quantity,
                                    sellingPrice: existingItem.sellingPrice,
                                    linkedItemId: existingItem.id
                                });
                               
                                updateStats();
                                updateDashboard();
                                renderStockTable();
                                renderSalesTable();
                               
                                output = `Command executed: Sold ${quantity} ${itemName}(s)`;
                                color = 'var(--success)';
                            }
                        } else {
                            output = `Error: Item "${itemName}" not found in inventory.`;
                            color = 'var(--danger)';
                        }
                    } else {
                        output = 'Error: Invalid sale command format. Use: sale [item name] [quantity]';
                        color = 'var(--danger)';
                    }
                } else {
                    output = 'Error: Invalid sale command format. Use: sale [item name] [quantity]';
                    color = 'var(--danger)';
                }
            } else if (command.startsWith('adjust stock ')) {
                const parts = command.split(' ');
                if (parts.length >= 4) {
                    const itemName = parts.slice(2, -1).join(' ');
                    const quantity = parseInt(parts[parts.length - 1]);
                   
                    if (itemName && quantity !== 0) {
                        const existingItem = stockItems.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                       
                        if (existingItem) {
                            const oldQuantity = existingItem.quantity;
                            existingItem.quantity += quantity;
                           
                            // Create adjustment record
                            const now = new Date();
                            const date = now.toISOString().split('T')[0];
                            const time = now.toTimeString().split(' ')[0].substring(0, 5);
                           
                            const newId = purchaseRecords.length > 0 ? Math.max(...purchaseRecords.map(record => record.id)) + 1 : 1;
                           
                            purchaseRecords.push({
                                id: newId,
                                date,
                                time,
                                name: itemName,
                                category: existingItem.category,
                                quantity: Math.abs(quantity),
                                costPrice: quantity > 0 ? existingItem.costPrice : 0,
                                linkedItemId: existingItem.id,
                                adjustment: true,
                                reason: 'command',
                                adjustmentType: quantity > 0 ? 'addition' : 'reduction'
                            });
                           
                            updateStats();
                            updateDashboard();
                            updateLinkedCounts();
                            renderStockTable();
                            renderPurchaseTable();
                           
                            output = `Command executed: Adjusted ${itemName} stock from ${oldQuantity} to ${existingItem.quantity} (${quantity > 0 ? '+' : ''}${quantity})`;
                            color = 'var(--success)';
                        } else {
                            output = `Error: Item "${itemName}" not found in inventory.`;
                            color = 'var(--danger)';
                        }
                    } else {
                        output = 'Error: Invalid adjust command format. Use: adjust stock [item name] [quantity]';
                        color = 'var(--danger)';
                    }
                } else {
                    output = 'Error: Invalid adjust command format. Use: adjust stock [item name] [quantity]';
                    color = 'var(--danger)';
                }
            } else if (command.startsWith('add ')) {
                const itemName = command.substring(4);
                if (itemName) {
                    // Check if item already exists
                    const existingItem = stockItems.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                   
                    if (!existingItem) {
                        // Add new item
                        const newId = stockItems.length > 0 ? Math.max(...stockItems.map(item => item.id)) + 1 : 1;
                       
                        stockItems.push({
                            id: newId,
                            name: itemName,
                            category: 'electronics',
                            quantity: 0,
                            targetStock: 50,
                            costPrice: 0.00,
                            sellingPrice: 0.00,
                            linkedPurchases: []
                        });
                       
                        updateStats();
                        updateDashboard();
                        updateLinkedCounts();
                        renderStockTable();
                       
                        output = `Command executed: Added "${itemName}" to inventory`;
                        color = 'var(--success)';
                    } else {
                        output = `Error: Item "${itemName}" already exists in inventory.`;
                        color = 'var(--danger)';
                    }
                } else {
                    output = 'Error: Please specify an item name after "add"';
                    color = 'var(--danger)';
                }
            } else if (command.startsWith('search ')) {
                const searchTerm = command.substring(7);
                if (searchTerm) {
                    searchInput.value = searchTerm;
                    filterItems();
                    output = `Search results for "${searchTerm}"`;
                    color = 'var(--info)';
                } else {
                    output = 'Error: Please specify a search term after "search"';
                    color = 'var(--danger)';
                }
            } else if (command === 'low stock') {
                const lowStockItems = stockItems.filter(item => {
                    const stockLevel = calculateStockLevel(item.quantity, item.targetStock);
                    return stockLevel === 'Low';
                });
                output = `Low stock items: ${lowStockItems.length} items need restocking`;
                color = 'var(--warning)';
               
                // Filter to show only low stock items
                renderStockTable(lowStockItems);
            } else if (command === 'total value') {
                const totalValue = stockItems.reduce((sum, item) => sum + (item.quantity * item.sellingPrice), 0);
                output = `Total inventory value: Ghc ${totalValue.toFixed(2)}`;
                color = 'var(--success)';
            } else if (command === 'today sales') {
                const today = new Date().toISOString().split('T')[0];
                const todaySales = salesRecords
                    .filter(record => record.date === today)
                    .reduce((sum, record) => sum + (record.quantity * record.sellingPrice), 0);
                output = `Today's sales: Ghc ${todaySales.toFixed(2)}`;
                color = 'var(--success)';
            } else if (command === 'link records') {
                linkAllTables();
                output = 'Linking all purchase records to inventory items';
                color = 'var(--info)';
            } else if (command === 'sync') {
                syncAllData();
                output = 'Syncing all data';
                color = 'var(--info)';
            } else if (command === 'help') {
                output = 'Available commands:\n- purchase [item] [quantity]\n- sale [item] [quantity]\n- adjust stock [item] [quantity]\n- add [item]\n- search [term]\n- low stock\n- total value\n- today sales\n- link records\n- sync\n- lock\n- unlock\n- help';
                color = 'var(--info)';
            } else if (command === 'lock') {
                lockSystem();
                output = 'System locked';
                color = 'var(--warning)';
            } else if (command === 'unlock') {
                showSecurityModal();
                output = 'Please enter password to unlock';
                color = 'var(--warning)';
            } else {
                output = `Unknown command: "${command}". Type "help" for available commands.`;
                color = 'var(--danger)';
            }
           
            commandOutput.textContent = output;
            commandOutput.style.color = color;
        }

        // Load data from localStorage on page load
        function loadData() {
            const savedStock = localStorage.getItem('stockItems');
            const savedPurchases = localStorage.getItem('purchaseRecords');
            const savedSales = localStorage.getItem('salesRecords');
           
            if (savedStock) {
                stockItems = JSON.parse(savedStock);
            }
           
            if (savedPurchases) {
                purchaseRecords = JSON.parse(savedPurchases);
            }
           
            if (savedSales) {
                salesRecords = JSON.parse(savedSales);
            }
        }

        // Call loadData on initialization
        loadData();
    </script>
</body>
</html>